<div class="filters-overlay">
  <!-- Header -->
  <div class="filters-header">
    <h3>
      <mat-icon>tune</mat-icon>
      {{ 'searchFilters.title' | translate }}
    </h3>
  </div>

  <!-- Scrollable Content -->
  <div class="filters-content">
    <!-- Type Filter -->
    <div class="filter-section">
      <label>{{ 'common.type' | translate }}</label>
      <select [(ngModel)]="filters.type">
        @for (type of documentTypes; track type) {
          <option [ngValue]="type.value">
            {{ type.labelKey | translate }}
          </option>
        }
      </select>
    </div>

    <!-- Date Modified Filter -->
    <div class="filter-section">
      <label>{{ 'common.dateModified' | translate }}</label>
      <select [(ngModel)]="filters.dateModified">
        @for (date of dateOptions; track date) {
          <option [value]="date.value">
            {{ date.labelKey | translate }}
          </option>
        }
      </select>
    </div>

    <!-- Owner Filter -->
    <div class="filter-section">
      <label>{{ 'common.owner' | translate }}</label>
      <input type="text" [(ngModel)]="filters.owner" [placeholder]="'searchFilters.ownerPlaceholder' | translate" />
    </div>

    <!-- File Type Filter (Conditional) -->
    @if (showFileTypeFilter) {
      <div class="filter-section">
        <label>{{ 'searchFilters.fileType' | translate }}</label>
        <select [(ngModel)]="filters.fileType">
          @for (ft of fileTypeOptions; track ft) {
            <option [value]="ft.value">
              {{ ft.labelKey | translate }}
            </option>
          }
        </select>
      </div>
    }

    <!-- Metadata Filter -->
    <div class="filter-section">
      <label>{{ 'common.metadata' | translate }}</label>
      <div class="metadata-list">
        @for (meta of metadataFilters; track meta; let i = $index) {
          <div class="metadata-item">
            <input type="text" [(ngModel)]="meta.key" [placeholder]="'common.key' | translate" class="meta-input" />
            <input type="text" [(ngModel)]="meta.value" [placeholder]="'common.value' | translate" class="meta-input" />
            <button class="btn-remove" (click)="$event.stopPropagation(); removeMetadataFilter(i)"
              [matTooltip]="'searchFilters.remove' | translate">
              <mat-icon>close</mat-icon>
            </button>
          </div>
        }
        <button class="btn-add" (click)="addMetadataFilter()">
          <mat-icon>add</mat-icon>
          {{ 'searchFilters.addMetadataFilter' | translate }}
        </button>
      </div>
    </div>
  </div>

  <!-- Footer Actions -->
  <div class="filter-actions">
    <button class="btn-clear" (click)="clearFilters()">{{ 'common.clear' | translate }}</button>
    <button class="btn-apply" (click)="applyFilters()">{{ 'searchFilters.applyFilters' | translate }}</button>
  </div>
</div>